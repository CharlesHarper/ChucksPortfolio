{"ast":null,"code":"import VideoWorker from 'video-worker';\nimport global from 'global';\nexport default function jarallaxVideo() {\n  var jarallax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.jarallax;\n\n  if (typeof jarallax === 'undefined') {\n    return;\n  }\n\n  var Jarallax = jarallax.constructor; // append video after when block will be visible.\n\n  var defOnScroll = Jarallax.prototype.onScroll;\n\n  Jarallax.prototype.onScroll = function () {\n    var self = this;\n    defOnScroll.apply(self);\n    var isReady = !self.isVideoInserted && self.video && (!self.options.videoLazyLoading || self.isElementInViewport) && !self.options.disableVideo();\n\n    if (isReady) {\n      self.isVideoInserted = true;\n      self.video.getVideo(function (video) {\n        var $parent = video.parentNode;\n        self.css(video, {\n          position: self.image.position,\n          top: '0px',\n          left: '0px',\n          right: '0px',\n          bottom: '0px',\n          width: '100%',\n          height: '100%',\n          maxWidth: 'none',\n          maxHeight: 'none',\n          margin: 0,\n          zIndex: -1\n        });\n        self.$video = video;\n        self.image.$container.appendChild(video); // remove parent video element (created by VideoWorker)\n\n        $parent.parentNode.removeChild($parent);\n      });\n    }\n  }; // cover video\n\n\n  var defCoverImage = Jarallax.prototype.coverImage;\n\n  Jarallax.prototype.coverImage = function () {\n    var self = this;\n    var imageData = defCoverImage.apply(self);\n    var node = self.image.$item ? self.image.$item.nodeName : false;\n\n    if (imageData && self.video && node && (node === 'IFRAME' || node === 'VIDEO')) {\n      var h = imageData.image.height;\n      var w = h * self.image.width / self.image.height;\n      var ml = (imageData.container.width - w) / 2;\n      var mt = imageData.image.marginTop;\n\n      if (imageData.container.width > w) {\n        w = imageData.container.width;\n        h = w * self.image.height / self.image.width;\n        ml = 0;\n        mt += (imageData.image.height - h) / 2;\n      } // add video height over than need to hide controls\n\n\n      if (node === 'IFRAME') {\n        h += 400;\n        mt -= 200;\n      }\n\n      self.css(self.$video, {\n        width: \"\".concat(w, \"px\"),\n        marginLeft: \"\".concat(ml, \"px\"),\n        height: \"\".concat(h, \"px\"),\n        marginTop: \"\".concat(mt, \"px\")\n      });\n    }\n\n    return imageData;\n  }; // init video\n\n\n  var defInitImg = Jarallax.prototype.initImg;\n\n  Jarallax.prototype.initImg = function () {\n    var self = this;\n    var defaultResult = defInitImg.apply(self);\n\n    if (!self.options.videoSrc) {\n      self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\n    }\n\n    if (self.options.videoSrc) {\n      self.defaultInitImgResult = defaultResult;\n      return true;\n    }\n\n    return defaultResult;\n  };\n\n  var defCanInitParallax = Jarallax.prototype.canInitParallax;\n\n  Jarallax.prototype.canInitParallax = function () {\n    var self = this;\n    var defaultResult = defCanInitParallax.apply(self);\n\n    if (!self.options.videoSrc) {\n      return defaultResult;\n    }\n\n    var video = new VideoWorker(self.options.videoSrc, {\n      autoplay: true,\n      loop: self.options.videoLoop,\n      showContols: false,\n      startTime: self.options.videoStartTime || 0,\n      endTime: self.options.videoEndTime || 0,\n      mute: self.options.videoVolume ? 0 : 1,\n      volume: self.options.videoVolume || 0\n    });\n\n    if (video.isValid()) {\n      // if parallax will not be inited, we can add thumbnail on background.\n      if (!defaultResult) {\n        if (!self.defaultInitImgResult) {\n          video.getImageURL(function (url) {\n            // save default user styles\n            var curStyle = self.$item.getAttribute('style');\n\n            if (curStyle) {\n              self.$item.setAttribute('data-jarallax-original-styles', curStyle);\n            } // set new background\n\n\n            self.css(self.$item, {\n              'background-image': \"url(\\\"\".concat(url, \"\\\")\"),\n              'background-position': 'center',\n              'background-size': 'cover'\n            });\n          });\n        } // init video\n\n      } else {\n        video.on('ready', function () {\n          if (self.options.videoPlayOnlyVisible) {\n            var oldOnScroll = self.onScroll;\n\n            self.onScroll = function () {\n              oldOnScroll.apply(self);\n\n              if (self.options.videoLoop || !self.options.videoLoop && !self.videoEnded) {\n                if (self.isVisible()) {\n                  video.play();\n                } else {\n                  video.pause();\n                }\n              }\n            };\n          } else {\n            video.play();\n          }\n        });\n        video.on('started', function () {\n          self.image.$default_item = self.image.$item;\n          self.image.$item = self.$video; // set video width and height\n\n          self.image.width = self.video.videoWidth || 1280;\n          self.image.height = self.video.videoHeight || 720;\n          self.coverImage();\n          self.clipContainer();\n          self.onScroll(); // hide image\n\n          if (self.image.$default_item) {\n            self.image.$default_item.style.display = 'none';\n          }\n        });\n        video.on('ended', function () {\n          self.videoEnded = true;\n\n          if (!self.options.videoLoop) {\n            // show image if Loop disabled\n            if (self.image.$default_item) {\n              self.image.$item = self.image.$default_item;\n              self.image.$item.style.display = 'block'; // set image width and height\n\n              self.coverImage();\n              self.clipContainer();\n              self.onScroll();\n            }\n          }\n        });\n        self.video = video; // set image if not exists\n\n        if (!self.defaultInitImgResult) {\n          // set empty image on local video if not defined\n          self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\n          if (video.type !== 'local') {\n            video.getImageURL(function (url) {\n              self.image.bgImage = \"url(\\\"\".concat(url, \"\\\")\");\n              self.init();\n            });\n            return false;\n          }\n\n          return true;\n        }\n      }\n    }\n\n    return defaultResult;\n  }; // Destroy video parallax\n\n\n  var defDestroy = Jarallax.prototype.destroy;\n\n  Jarallax.prototype.destroy = function () {\n    var self = this;\n\n    if (self.image.$default_item) {\n      self.image.$item = self.image.$default_item;\n      delete self.image.$default_item;\n    }\n\n    defDestroy.apply(self);\n  };\n}","map":{"version":3,"sources":["/Users/charlesharper/Desktop/Chuck2020/MDB-React-Pro-npm/node_modules/jarallax/src/jarallax-video.esm.js"],"names":["VideoWorker","global","jarallaxVideo","jarallax","Jarallax","constructor","defOnScroll","prototype","onScroll","self","apply","isReady","isVideoInserted","video","options","videoLazyLoading","isElementInViewport","disableVideo","getVideo","$parent","parentNode","css","position","image","top","left","right","bottom","width","height","maxWidth","maxHeight","margin","zIndex","$video","$container","appendChild","removeChild","defCoverImage","coverImage","imageData","node","$item","nodeName","h","w","ml","container","mt","marginTop","marginLeft","defInitImg","initImg","defaultResult","videoSrc","getAttribute","defaultInitImgResult","defCanInitParallax","canInitParallax","autoplay","loop","videoLoop","showContols","startTime","videoStartTime","endTime","videoEndTime","mute","videoVolume","volume","isValid","getImageURL","url","curStyle","setAttribute","on","videoPlayOnlyVisible","oldOnScroll","videoEnded","isVisible","play","pause","$default_item","videoWidth","videoHeight","clipContainer","style","display","src","type","bgImage","init","defDestroy","destroy"],"mappings":"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","sourcesContent":["import VideoWorker from 'video-worker';\nimport global from 'global';\n\nexport default function jarallaxVideo(jarallax = global.jarallax) {\n    if (typeof jarallax === 'undefined') {\n        return;\n    }\n\n    const Jarallax = jarallax.constructor;\n\n    // append video after when block will be visible.\n    const defOnScroll = Jarallax.prototype.onScroll;\n    Jarallax.prototype.onScroll = function () {\n        const self = this;\n\n        defOnScroll.apply(self);\n\n        const isReady = !self.isVideoInserted\n                        && self.video\n                        && (!self.options.videoLazyLoading || self.isElementInViewport)\n                        && !self.options.disableVideo();\n\n        if (isReady) {\n            self.isVideoInserted = true;\n\n            self.video.getVideo((video) => {\n                const $parent = video.parentNode;\n                self.css(video, {\n                    position: self.image.position,\n                    top: '0px',\n                    left: '0px',\n                    right: '0px',\n                    bottom: '0px',\n                    width: '100%',\n                    height: '100%',\n                    maxWidth: 'none',\n                    maxHeight: 'none',\n                    margin: 0,\n                    zIndex: -1,\n                });\n                self.$video = video;\n                self.image.$container.appendChild(video);\n\n                // remove parent video element (created by VideoWorker)\n                $parent.parentNode.removeChild($parent);\n            });\n        }\n    };\n\n    // cover video\n    const defCoverImage = Jarallax.prototype.coverImage;\n    Jarallax.prototype.coverImage = function () {\n        const self = this;\n        const imageData = defCoverImage.apply(self);\n        const node = self.image.$item ? self.image.$item.nodeName : false;\n\n        if (imageData && self.video && node && (node === 'IFRAME' || node === 'VIDEO')) {\n            let h = imageData.image.height;\n            let w = h * self.image.width / self.image.height;\n            let ml = (imageData.container.width - w) / 2;\n            let mt = imageData.image.marginTop;\n\n            if (imageData.container.width > w) {\n                w = imageData.container.width;\n                h = w * self.image.height / self.image.width;\n                ml = 0;\n                mt += (imageData.image.height - h) / 2;\n            }\n\n            // add video height over than need to hide controls\n            if (node === 'IFRAME') {\n                h += 400;\n                mt -= 200;\n            }\n\n            self.css(self.$video, {\n                width: `${w}px`,\n                marginLeft: `${ml}px`,\n                height: `${h}px`,\n                marginTop: `${mt}px`,\n            });\n        }\n\n        return imageData;\n    };\n\n    // init video\n    const defInitImg = Jarallax.prototype.initImg;\n    Jarallax.prototype.initImg = function () {\n        const self = this;\n        const defaultResult = defInitImg.apply(self);\n\n        if (!self.options.videoSrc) {\n            self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\n        }\n\n        if (self.options.videoSrc) {\n            self.defaultInitImgResult = defaultResult;\n            return true;\n        }\n\n        return defaultResult;\n    };\n\n    const defCanInitParallax = Jarallax.prototype.canInitParallax;\n    Jarallax.prototype.canInitParallax = function () {\n        const self = this;\n        const defaultResult = defCanInitParallax.apply(self);\n\n        if (!self.options.videoSrc) {\n            return defaultResult;\n        }\n\n        const video = new VideoWorker(self.options.videoSrc, {\n            autoplay: true,\n            loop: self.options.videoLoop,\n            showContols: false,\n            startTime: self.options.videoStartTime || 0,\n            endTime: self.options.videoEndTime || 0,\n            mute: self.options.videoVolume ? 0 : 1,\n            volume: self.options.videoVolume || 0,\n        });\n\n        if (video.isValid()) {\n            // if parallax will not be inited, we can add thumbnail on background.\n            if (!defaultResult) {\n                if (!self.defaultInitImgResult) {\n                    video.getImageURL((url) => {\n                        // save default user styles\n                        const curStyle = self.$item.getAttribute('style');\n                        if (curStyle) {\n                            self.$item.setAttribute('data-jarallax-original-styles', curStyle);\n                        }\n\n                        // set new background\n                        self.css(self.$item, {\n                            'background-image': `url(\"${url}\")`,\n                            'background-position': 'center',\n                            'background-size': 'cover',\n                        });\n                    });\n                }\n\n                // init video\n            } else {\n                video.on('ready', () => {\n                    if (self.options.videoPlayOnlyVisible) {\n                        const oldOnScroll = self.onScroll;\n                        self.onScroll = function () {\n                            oldOnScroll.apply(self);\n                            if (self.options.videoLoop || (!self.options.videoLoop && !self.videoEnded)) {\n                                if (self.isVisible()) {\n                                    video.play();\n                                } else {\n                                    video.pause();\n                                }\n                            }\n                        };\n                    } else {\n                        video.play();\n                    }\n                });\n                video.on('started', () => {\n                    self.image.$default_item = self.image.$item;\n                    self.image.$item = self.$video;\n\n                    // set video width and height\n                    self.image.width = self.video.videoWidth || 1280;\n                    self.image.height = self.video.videoHeight || 720;\n                    self.coverImage();\n                    self.clipContainer();\n                    self.onScroll();\n\n                    // hide image\n                    if (self.image.$default_item) {\n                        self.image.$default_item.style.display = 'none';\n                    }\n                });\n\n                video.on('ended', () => {\n                    self.videoEnded = true;\n\n                    if (!self.options.videoLoop) {\n                        // show image if Loop disabled\n                        if (self.image.$default_item) {\n                            self.image.$item = self.image.$default_item;\n                            self.image.$item.style.display = 'block';\n\n                            // set image width and height\n                            self.coverImage();\n                            self.clipContainer();\n                            self.onScroll();\n                        }\n                    }\n                });\n\n                self.video = video;\n\n                // set image if not exists\n                if (!self.defaultInitImgResult) {\n                    // set empty image on local video if not defined\n                    self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\n                    if (video.type !== 'local') {\n                        video.getImageURL((url) => {\n                            self.image.bgImage = `url(\"${url}\")`;\n                            self.init();\n                        });\n\n                        return false;\n                    }\n\n                    return true;\n                }\n            }\n        }\n\n        return defaultResult;\n    };\n\n    // Destroy video parallax\n    const defDestroy = Jarallax.prototype.destroy;\n    Jarallax.prototype.destroy = function () {\n        const self = this;\n\n        if (self.image.$default_item) {\n            self.image.$item = self.image.$default_item;\n            delete self.image.$default_item;\n        }\n\n        defDestroy.apply(self);\n    };\n}\n"]},"metadata":{},"sourceType":"module"}